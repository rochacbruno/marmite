<!-- website generated with Marmite SSG - https://github.com/rochacbruno/marmite -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />
    {%- block head %}
    <title>{{ site.name }} | {{ title }}</title>
    <link rel="stylesheet" type="text/css" href="./static/pico.min.css">
    <link rel="stylesheet" type="text/css" href="./static/marmite.css">
    <link rel="stylesheet" type="text/css" href="./static/custom.css">
    {% endblock -%}
</head>

<body>
    <main class="container">
        <header class="header-content">
            <nav class="header-nav">
                <ul class="header-name">
                    <li>
                        <hgroup>
                            <h2><a href="./index.html" class="contrast">{{ site.name }}</a></h2>
                            <p>{{ site.tagline }}</p>
                        </hgroup>
                    </li>
                </ul>
                <button id="menu-toggle" class="hamburger">&#9776;</button>
                
                <ul class="header-menu" id="header-menu">
                    {% for item in menu %}
                    <li>
                        {% if current_page and current_page == item.1 %}
                        <button class="menu-item active selected">{{item.0 | safe }}</button>
                        {% else %}
                        <a class="menu-item secondary" {% if item.1 is starting_with("http") %} href="{{item.1}}" target="_blank" {% else %} href="./{{item.1}}"{% endif %}>{{ item.0 | safe }}</a>
                        {% endif %}
                    </li>
                    {% endfor %}
                    <li><a href="#" id="theme-toggle" class="secondary">&#9789;</a></li>
                    <div class="underline"></div>
                </ul>
            </nav>
            {% if enable_search %}
            <div class="marmite-search-bar">
                <input placeholder="Search" id="marmite-search-bar" />
                <div class="marmite-search-bar-result">
                    <ul id="marmite-search-bar-result"></ul>
                </div>
            </div>
            {% endif %}
        </header>
        <section class="main-content">
            {% block main -%}{%- endblock %}
        </section>
        <footer class="footer-content">
            {{ site.footer | safe }}
        </footer>
    </main>
    {%- block tail %}
    <script src="./static/marmite.js"></script>
    <script src="./static/custom.js"></script>
    {% if enable_search %}
    <script type="module">
        import Fuse from "https://cdnjs.cloudflare.com/ajax/libs/fuse.js/7.0.0/fuse.basic.min.mjs";
        (async () => {
            const fuseOptions = {
                threshold: 0.25,
                findAllMatches: true,
                shouldSort: true,
                minMatchCharLength: 3,
                ignoreLocation: true,
                keys: ["title", "description", "tags", "html"]
            };

            try {
                const response = await fetch('./static/search_index.json');
                const data = await response.json();
                const fuse = new Fuse(data, fuseOptions);
                document.getElementById("marmite-search-bar").addEventListener("input", (event) => {
                    event.preventDefault();

                    // Clear previous results
                    const rootElement = document.querySelector(".marmite-search-bar-result");
                    rootElement.setAttribute("style", "display: none;");

                    const resultsElement = document.querySelector("#marmite-search-bar-result");
                    resultsElement.innerHTML = "";

                    // Search for results
                    const searchPattern = event.target.value;
                    if (searchPattern?.length > 2) {
                        const results = fuse.search(searchPattern);
                        if(results?.length > 0) {
                            // Build the results list, limiting here to 10 items
                            results.slice(0, 10).forEach((result) => {
                                const elementList = document.createElement("li");
                                const resultElement = document.createElement("a");
                                resultElement.href = `${result.item.slug}.html`;
                                resultElement.innerText = result.item.title;
                                elementList.appendChild(resultElement);
                                resultsElement.appendChild(elementList);
                            });
                        } else {
                            const elementList = document.createElement("li");
                            const resultElement = document.createElement("span");
                            resultElement.textContent = "No results found";
                            elementList.appendChild(resultElement);
                            resultsElement.appendChild(elementList);
                        }
                        rootElement.setAttribute("style", "display: block;");
                    }
                });
            } catch (error) {
                console.error('Error loading search data:', error);
            }
        })();
        </script>
    {% endif %}
    {% endblock -%}
</body>

</html>
